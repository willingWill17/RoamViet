<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>RoamViet - Travel Schedules</title>
    <link rel="icon" href="logo/logo-black.png" type="image/png" />
    <link rel="stylesheet" href="css/main_site_style.css" />
    <link rel="stylesheet" href="css/schedule_style.css" />
    <script src="script/accounts.js"></script>
  </head>
  <body>
    <header>
      <div class="logo">
        <img src="logo/logo-white.png" alt="RoamViet Logo" />
        <span class="logo-text"><a href="main_site.html">RoamViet</a></span>
      </div>
      <nav>
        <ul class="main-nav">
          <li><a href="checkin.html">Check-in</a></li>
          <li><a href="schedule.html" class="current">Schedule</a></li>
          <li><a href="all_63.html">63 t·ªânh th√†nh</a></li>
          <li><a href="messaging.html">Tin nh·∫Øn</a></li>
        </ul>
      </nav>
      <div class="contact-icons">
        <a href="contact.html" class="icon phone">
          <img src="logo/phone-icon-white.png" alt="Phone" />
        </a>
        <a href="contact.html" class="icon email">
          <img src="logo/email-icon-white.png" alt="Email" />
        </a>
        <a href="profile.html" class="icon profile">
          <img src="logo/profile-icon-white.png" alt="Profile" />
        </a>
        <button
          onclick="logout()"
          class="icon logout"
          style="background: none; border: none; cursor: pointer"
        >
          <img
            src="logo/logout-icon-white.png"
            alt="Logout"
            style="width: 24px; height: 24px"
          />
        </button>
      </div>
    </header>

    <div class="content">
      <div class="schedule-container">
        <!-- Header Section -->
        <div class="schedule-header">
          <h1>My Travel Schedules</h1>
          <button id="createScheduleBtn" class="create-btn">
            <span>+</span> Create New Schedule
          </button>
        </div>

        <!-- Schedules List -->
        <div class="schedules-grid" id="schedulesGrid">
          <div class="loading-message">Loading your schedules...</div>
        </div>

        <!-- Empty State -->
        <div class="empty-state" id="emptyState" style="display: none">
          <h3>No schedules yet</h3>
          <p>
            Create your first travel schedule to start planning your adventure!
          </p>
          <button class="create-btn" onclick="openCreateModal()">
            <span>+</span> Create Your First Schedule
          </button>
        </div>
      </div>
    </div>

    <!-- Create/Edit Schedule Modal -->
    <div id="scheduleModal" class="modal">
      <div class="modal-content">
        <div class="modal-header">
          <h2 id="modalTitle">Create New Schedule</h2>
          <span class="close">&times;</span>
        </div>
        <div class="modal-body">
          <form id="scheduleForm">
            <div class="form-group">
              <label for="scheduleTitle">Schedule Title *</label>
              <input
                type="text"
                id="scheduleTitle"
                required
                placeholder="e.g., Amazing Vietnam Adventure"
              />
            </div>

            <div class="form-group">
              <label for="scheduleDescription">Description</label>
              <textarea
                id="scheduleDescription"
                rows="3"
                placeholder="Describe your travel plans..."
              ></textarea>
            </div>

            <div class="form-row">
              <div class="form-group">
                <label for="startDate">Start Date *</label>
                <input type="date" id="startDate" required />
              </div>
              <div class="form-group">
                <label for="endDate">End Date *</label>
                <input type="date" id="endDate" required />
              </div>
            </div>

            <div class="form-row">
              <div class="form-group">
                <label for="budget">Budget</label>
                <input type="number" id="budget" placeholder="0" min="0" />
              </div>
              <div class="form-group">
                <label for="currency">Currency</label>
                <select id="currency">
                  <option value="VND">VND (Vietnamese Dong)</option>
                  <option value="USD">USD (US Dollar)</option>
                  <option value="EUR">EUR (Euro)</option>
                </select>
              </div>
            </div>

            <div class="form-group">
              <label for="tags">Tags (optional)</label>
              <input
                type="text"
                id="tags"
                placeholder="adventure, family, budget, luxury (comma-separated)"
              />
            </div>

            <!-- Visibility Settings -->
            <div class="form-group">
              <label>Schedule Visibility</label>
              <div class="visibility-options">
                <label class="radio-label">
                  <input
                    type="radio"
                    name="visibility"
                    value="private"
                    id="visibilityPrivate"
                    checked
                  />
                  <span class="radio-checkmark"></span>
                  Private (only you can see it)
                </label>

                <label class="radio-label">
                  <input
                    type="radio"
                    name="visibility"
                    value="shared"
                    id="visibilityShared"
                  />
                  <span class="radio-checkmark"></span>
                  Share with people
                </label>
              </div>
            </div>

            <!-- Email Sharing Section -->
            <div
              class="form-group"
              id="emailSharingSection"
              style="display: none"
            >
              <label for="sharedEmails"
                >Share with (enter email addresses)</label
              >
              <div class="email-input-container">
                <div class="email-search-wrapper">
                  <input
                    type="email"
                    id="emailInput"
                    placeholder="Enter email address or search for users"
                    autocomplete="off"
                  />
                  <div id="userSearchResults" class="user-search-results">
                    <!-- Search results will appear here -->
                  </div>
                </div>
                <button type="button" id="addEmailBtn" class="btn-add-email">
                  Add
                </button>
              </div>
              <div id="emailList" class="email-list">
                <!-- Added emails will appear here -->
              </div>
              <small class="form-help"
                >Enter email addresses of people you want to share this schedule
                with. Start typing to search for existing users.</small
              >
            </div>

            <!-- Daily Planning Section -->
            <div class="form-group daily-planning-section">
              <label class="section-title">
                <span class="title-icon">üìÖ</span>
                Daily Planning
              </label>
              <div class="planning-description">
                <p>
                  Create custom time phases for each day and add activities with
                  detailed notes. Perfect for organizing your perfect travel
                  itinerary!
                </p>
              </div>
              <div
                id="dailyPlansContainer"
                class="daily-plans-container-redesigned"
              >
                <!-- Daily plans will be generated here based on date range -->
                <div class="daily-plans-placeholder-redesigned">
                  <div class="placeholder-content">
                    <div class="placeholder-icon">üóìÔ∏è</div>
                    <h3>Ready to Plan Your Days?</h3>
                    <p>
                      Select your start and end dates above to begin creating
                      your detailed daily itinerary with custom time phases and
                      activities.
                    </p>
                  </div>
                </div>
              </div>
            </div>

            <!-- Keep the old public checkbox for backward compatibility, but hide it -->
            <div class="form-group" style="display: none">
              <label class="checkbox-label">
                <input type="checkbox" id="isPublic" />
                <span class="checkmark"></span>
                Make this schedule public (others can view it)
              </label>
            </div>
          </form>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn-secondary" onclick="closeModal()">
            Cancel
          </button>
          <button
            type="submit"
            form="scheduleForm"
            class="btn-primary"
            id="saveScheduleBtn"
          >
            Create Schedule
          </button>
        </div>
      </div>
    </div>

    <!-- Schedule Detail Modal -->
    <div id="detailModal" class="modal">
      <div class="modal-content large-modal">
        <div class="modal-header">
          <h2 id="detailTitle">Schedule Details</h2>
          <div class="header-actions">
            <button id="editScheduleBtn" class="btn-secondary">Edit</button>
            <button id="deleteScheduleBtn" class="btn-danger">Delete</button>
            <span class="close">&times;</span>
          </div>
        </div>
        <div class="modal-body">
          <div id="scheduleDetails">
            <!-- Schedule details will be populated here -->
          </div>
        </div>
      </div>
    </div>

    <!-- Day Plan Preview Modal -->
    <div id="dayPlanModal" class="modal">
      <div class="modal-content medium-modal">
        <div class="modal-header">
          <h2 id="dayPlanTitle">Day Plan Overview</h2>
          <div class="header-actions">
            <button id="editDayPlanBtn" class="btn-secondary">Edit Day</button>
            <span class="close">&times;</span>
          </div>
        </div>
        <div class="modal-body">
          <div id="dayPlanDetails" class="day-plan-preview">
            <!-- Day plan details will be populated here -->
          </div>
        </div>
      </div>
    </div>

    <script src="script/schedule.script.js"></script>

    <style>
      .schedule-container {
        max-width: 1200px;
        margin: 0 auto;
        padding: 20px;
        background: rgba(255, 255, 255, 0.95);
        border-radius: 10px;
        min-height: 80vh;
      }

      .schedule-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 30px;
        padding-bottom: 20px;
        border-bottom: 2px solid #eee;
      }

      .schedule-header h1 {
        color: #333;
        margin: 0;
      }

      .create-btn {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        color: white;
        border: none;
        padding: 12px 24px;
        border-radius: 8px;
        cursor: pointer;
        font-size: 16px;
        font-weight: 600;
        transition: transform 0.2s, box-shadow 0.2s;
      }

      .create-btn:hover {
        transform: translateY(-2px);
        box-shadow: 0 4px 12px rgba(102, 126, 234, 0.4);
      }

      .create-btn span {
        font-size: 20px;
        margin-right: 8px;
      }

      .schedules-grid {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(350px, 1fr));
        gap: 20px;
        margin-bottom: 40px;
      }

      .schedule-card {
        background: white;
        border-radius: 12px;
        padding: 20px;
        box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        transition: transform 0.2s, box-shadow 0.2s;
        cursor: pointer;
        border: 1px solid #e0e0e0;
      }

      .schedule-card:hover {
        transform: translateY(-4px);
        box-shadow: 0 8px 20px rgba(0, 0, 0, 0.15);
      }

      .shared-schedule {
        border-left: 4px solid #667eea;
        background: linear-gradient(135deg, #f8f9ff 0%, #ffffff 100%);
      }

      .schedule-card .schedule-header {
        display: flex;
        justify-content: space-between;
        align-items: flex-start;
        margin-bottom: 10px;
        gap: 10px;
        padding: 0;
        border: none;
      }

      .schedule-card h3 {
        margin: 0;
        color: #333;
        font-size: 18px;
        flex: 1;
      }

      .schedule-card .description {
        color: #666;
        font-size: 14px;
        margin-bottom: 15px;
        overflow: hidden;
        display: -webkit-box;
        -webkit-line-clamp: 2;
        -webkit-box-orient: vertical;
      }

      .schedule-card .dates {
        display: flex;
        justify-content: space-between;
        font-size: 14px;
        color: #888;
        margin-bottom: 10px;
      }

      .schedule-card .budget {
        font-weight: 600;
        color: #27ae60;
        font-size: 16px;
      }

      .schedule-card .tags {
        margin-top: 10px;
      }

      .tag {
        display: inline-block;
        background: #f0f0f0;
        color: #666;
        padding: 4px 8px;
        border-radius: 12px;
        font-size: 12px;
        margin-right: 5px;
        margin-bottom: 5px;
      }

      .empty-state {
        text-align: center;
        padding: 60px 20px;
        color: #666;
      }

      .empty-state h3 {
        margin-bottom: 10px;
        color: #333;
      }

      .loading-message {
        grid-column: 1 / -1;
        text-align: center;
        padding: 40px;
        color: #666;
        font-size: 18px;
      }

      /* Modal Styles */
      .modal {
        display: none;
        position: fixed;
        z-index: 1000;
        left: 0;
        top: 0;
        width: 100%;
        height: 100%;
        background-color: rgba(0, 0, 0, 0.5);
        backdrop-filter: blur(5px);
      }

      .modal-content {
        background-color: white;
        margin: 5% auto;
        padding: 0;
        border-radius: 12px;
        width: 90%;
        max-width: 1000px;
        max-height: 90vh;
        overflow-y: auto;
        box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);
      }

      .large-modal {
        max-width: 1200px;
      }

      .medium-modal {
        max-width: 800px;
      }

      .modal-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 20px 30px;
        border-bottom: 1px solid #eee;
        background: #f8f9fa;
        border-radius: 12px 12px 0 0;
      }

      .modal-header h2 {
        margin: 0;
        color: #333;
      }

      .header-actions {
        display: flex;
        gap: 10px;
        align-items: center;
      }

      .close {
        color: #aaa;
        font-size: 28px;
        font-weight: bold;
        cursor: pointer;
        margin-left: 15px;
      }

      .close:hover {
        color: #333;
      }

      .modal-body {
        padding: 30px;
      }

      .modal-footer {
        padding: 20px 30px;
        border-top: 1px solid #eee;
        display: flex;
        justify-content: flex-end;
        gap: 10px;
        background: #f8f9fa;
        border-radius: 0 0 12px 12px;
      }

      .form-group {
        margin-bottom: 20px;
      }

      .form-row {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 20px;
      }

      .form-group label {
        display: block;
        margin-bottom: 5px;
        font-weight: 600;
        color: #333;
      }

      .form-group input,
      .form-group textarea,
      .form-group select {
        width: 100%;
        padding: 12px;
        border: 2px solid #e0e0e0;
        border-radius: 6px;
        font-size: 16px;
        transition: border-color 0.3s;
      }

      .form-group input:focus,
      .form-group textarea:focus,
      .form-group select:focus {
        outline: none;
        border-color: #667eea;
      }

      .checkbox-label {
        display: flex;
        align-items: center;
        cursor: pointer;
        font-weight: normal !important;
      }

      .checkbox-label input[type="checkbox"] {
        margin-right: 10px;
        width: auto;
      }

      .btn-primary {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        color: white;
        border: none;
        padding: 12px 24px;
        border-radius: 6px;
        cursor: pointer;
        font-size: 16px;
        font-weight: 600;
      }

      .btn-secondary {
        background: #f8f9fa;
        color: #333;
        border: 2px solid #e0e0e0;
        padding: 12px 24px;
        border-radius: 6px;
        cursor: pointer;
        font-size: 16px;
        font-weight: 600;
      }

      .btn-danger {
        background: #dc3545;
        color: white;
        border: none;
        padding: 12px 24px;
        border-radius: 6px;
        cursor: pointer;
        font-size: 16px;
        font-weight: 600;
      }

      .btn-primary:hover,
      .btn-secondary:hover,
      .btn-danger:hover {
        opacity: 0.9;
        transform: translateY(-1px);
      }

      /* Visibility Options Styles */
      .visibility-options {
        display: flex;
        flex-direction: column;
        gap: 10px;
        margin-top: 8px;
      }

      .radio-label {
        display: flex;
        align-items: center;
        cursor: pointer;
        padding: 8px 0;
        font-size: 14px;
      }

      .radio-label input[type="radio"] {
        margin-right: 10px;
        transform: scale(1.2);
      }

      .radio-checkmark {
        margin-left: 5px;
      }

      /* Email Sharing Styles */
      .email-input-container {
        display: flex;
        gap: 10px;
        margin-bottom: 10px;
      }

      .email-search-wrapper {
        flex: 1;
        position: relative;
      }

      #emailInput {
        width: 100%;
        padding: 8px 12px;
        border: 1px solid #ddd;
        border-radius: 4px;
        font-size: 14px;
      }

      .user-search-results {
        position: absolute;
        top: 100%;
        left: 0;
        right: 0;
        background: white;
        border: 1px solid #ddd;
        border-top: none;
        border-radius: 0 0 4px 4px;
        max-height: 200px;
        overflow-y: auto;
        z-index: 1000;
        display: none;
        box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
      }

      .user-search-results.show {
        display: block;
      }

      .user-search-item {
        padding: 12px;
        cursor: pointer;
        border-bottom: 1px solid #f0f0f0;
        transition: background-color 0.2s;
        display: flex;
        align-items: center;
        gap: 10px;
      }

      .user-search-item:hover {
        background-color: #f8f9fa;
      }

      .user-search-item:last-child {
        border-bottom: none;
      }

      .user-avatar {
        width: 32px;
        height: 32px;
        border-radius: 50%;
        background: #667eea;
        color: white;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 12px;
        font-weight: bold;
      }

      .user-info {
        flex: 1;
      }

      .user-name {
        font-weight: 500;
        color: #333;
        font-size: 14px;
      }

      .user-email {
        color: #666;
        font-size: 12px;
      }

      .no-users-found {
        padding: 12px;
        text-align: center;
        color: #666;
        font-style: italic;
        font-size: 14px;
      }

      .searching-users {
        padding: 12px;
        text-align: center;
        color: #666;
        font-size: 14px;
      }

      .btn-add-email {
        background: #667eea;
        color: white;
        border: none;
        padding: 8px 16px;
        border-radius: 4px;
        cursor: pointer;
        font-size: 14px;
        white-space: nowrap;
      }

      .btn-add-email:hover {
        background: #5a67d8;
      }

      .email-list {
        display: flex;
        flex-wrap: wrap;
        gap: 8px;
        margin-bottom: 8px;
        min-height: 20px;
      }

      .email-tag {
        display: inline-flex;
        align-items: center;
        background: #e7f3ff;
        color: #1e40af;
        padding: 4px 8px;
        border-radius: 16px;
        font-size: 12px;
        border: 1px solid #bfdbfe;
      }

      .email-tag .remove-email {
        margin-left: 6px;
        background: none;
        border: none;
        color: #dc2626;
        cursor: pointer;
        font-size: 14px;
        padding: 0;
        width: 16px;
        height: 16px;
        display: flex;
        align-items: center;
        justify-content: center;
        border-radius: 50%;
      }

      .email-tag .remove-email:hover {
        background: #fecaca;
      }

      .form-help {
        color: #666;
        font-size: 12px;
        font-style: italic;
      }

      /* Email badge styles for detail view */
      .shared-emails {
        display: flex;
        flex-wrap: wrap;
        gap: 6px;
      }

      .email-badge {
        display: inline-block;
        background: #e0f2fe;
        color: #0277bd;
        padding: 2px 8px;
        border-radius: 12px;
        font-size: 11px;
        border: 1px solid #b3e5fc;
      }

      .shared-badge {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        color: white;
        padding: 4px 8px;
        border-radius: 12px;
        font-size: 11px;
        font-weight: 600;
        white-space: nowrap;
        box-shadow: 0 2px 4px rgba(102, 126, 234, 0.3);
      }

      .public-badge {
        background: linear-gradient(135deg, #10b981 0%, #059669 100%);
        color: white;
        padding: 4px 8px;
        border-radius: 12px;
        font-size: 11px;
        font-weight: 600;
        white-space: nowrap;
      }

      .private-shared-badge {
        background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%);
        color: white;
        padding: 4px 8px;
        border-radius: 12px;
        font-size: 11px;
        font-weight: 600;
        white-space: nowrap;
      }

      .private-badge {
        background: linear-gradient(135deg, #6b7280 0%, #4b5563 100%);
        color: white;
        padding: 4px 8px;
        border-radius: 12px;
        font-size: 11px;
        font-weight: 600;
        white-space: nowrap;
      }

      .shared-schedule-notice {
        background: linear-gradient(135deg, #e0f2fe 0%, #f0f9ff 100%);
        border: 1px solid #bae6fd;
        border-radius: 8px;
        padding: 12px 16px;
        margin-bottom: 20px;
        display: flex;
        align-items: center;
        gap: 8px;
        color: #0369a1;
        font-weight: 500;
      }

      .shared-icon {
        font-size: 16px;
      }

      /* Daily Planning Styles - Redesigned */
      .daily-planning-section {
        margin-top: 30px;
        padding: 20px;
        background: #f8f9fa;
        border-radius: 12px;
        border: 2px solid #e9ecef;
      }

      .section-title {
        display: flex;
        align-items: center;
        gap: 8px;
        font-size: 18px;
        font-weight: 700;
        color: #495057;
        margin-bottom: 8px;
      }

      .title-icon {
        font-size: 22px;
      }

      .planning-description {
        margin-bottom: 20px;
      }

      .planning-description p {
        color: #6c757d;
        margin: 0;
        font-size: 14px;
        line-height: 1.5;
      }

      .daily-plans-container-redesigned {
        background: white;
        border-radius: 12px;
        border: 1px solid #dee2e6;
        min-height: 400px;
        max-height: 600px;
        overflow-y: auto;
      }

      .daily-plans-placeholder-redesigned {
        display: flex;
        align-items: center;
        justify-content: center;
        height: 400px;
        text-align: center;
      }

      .placeholder-content {
        max-width: 400px;
      }

      .placeholder-icon {
        font-size: 48px;
        margin-bottom: 16px;
      }

      .placeholder-content h3 {
        color: #495057;
        margin-bottom: 12px;
        font-size: 20px;
      }

      .placeholder-content p {
        color: #6c757d;
        margin: 0;
        line-height: 1.6;
      }

      .day-plan-card-redesigned {
        background: white;
        margin: 16px;
        border-radius: 12px;
        border: 2px solid #e9ecef;
        overflow: hidden;
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
        transition: all 0.3s ease;
      }

      .day-plan-card-redesigned:hover {
        border-color: #667eea;
        box-shadow: 0 4px 16px rgba(102, 126, 234, 0.15);
      }

      .day-plan-header-redesigned {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        color: white;
        padding: 16px 20px;
        font-weight: 600;
        font-size: 16px;
        display: flex;
        justify-content: space-between;
        align-items: center;
      }

      .day-plan-header-redesigned .day-info {
        display: flex;
        align-items: center;
        gap: 12px;
      }

      .day-number-badge {
        background: rgba(255, 255, 255, 0.2);
        padding: 4px 12px;
        border-radius: 20px;
        font-size: 14px;
        font-weight: 700;
      }

      .day-plan-toggle {
        background: none;
        border: none;
        color: white;
        cursor: pointer;
        font-size: 20px;
        padding: 8px;
        border-radius: 6px;
        transition: background 0.2s;
      }

      .day-plan-toggle:hover {
        background: rgba(255, 255, 255, 0.2);
      }

      .day-plan-content-redesigned {
        display: none;
        padding: 0;
      }

      .day-plan-content-redesigned.expanded {
        display: block;
      }

      .day-controls-redesigned {
        padding: 20px;
        background: #f8f9fa;
        border-bottom: 1px solid #e9ecef;
        text-align: center;
      }

      .btn-add-time-phase-redesigned {
        background: linear-gradient(135deg, #28a745 0%, #20c997 100%);
        color: white;
        border: none;
        padding: 12px 24px;
        border-radius: 8px;
        font-size: 14px;
        font-weight: 600;
        cursor: pointer;
        transition: all 0.3s ease;
        box-shadow: 0 2px 8px rgba(40, 167, 69, 0.3);
      }

      .btn-add-time-phase-redesigned:hover {
        transform: translateY(-1px);
        box-shadow: 0 4px 12px rgba(40, 167, 69, 0.4);
      }

      .time-phases-redesigned {
        padding: 20px;
        display: grid;
        gap: 20px;
      }

      .no-phases-redesigned {
        text-align: center;
        padding: 40px 20px;
        color: #6c757d;
        font-style: italic;
      }

      .time-phase-redesigned {
        border: 2px solid #e9ecef;
        border-radius: 12px;
        overflow: hidden;
        background: white;
        transition: border-color 0.3s ease;
      }

      .time-phase-redesigned:hover {
        border-color: #667eea;
      }

      .time-phase-header-redesigned {
        background: #f8f9fa;
        padding: 16px 20px;
        border-bottom: 1px solid #e9ecef;
      }

      .phase-inputs-row {
        display: grid;
        grid-template-columns: 2fr 1fr;
        gap: 12px;
        margin-bottom: 12px;
      }

      .phase-name-input-redesigned {
        padding: 10px 12px;
        border: 2px solid #e9ecef;
        border-radius: 8px;
        font-size: 15px;
        font-weight: 600;
        background: white;
        transition: border-color 0.3s ease;
      }

      .phase-name-input-redesigned:focus {
        outline: none;
        border-color: #667eea;
        box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
      }

      .phase-time-input-redesigned {
        padding: 10px 12px;
        border: 2px solid #e9ecef;
        border-radius: 8px;
        font-size: 14px;
        background: white;
        transition: border-color 0.3s ease;
      }

      .phase-time-input-redesigned:focus {
        outline: none;
        border-color: #667eea;
        box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
      }

      .phase-actions-redesigned {
        display: flex;
        gap: 8px;
      }

      .btn-add-activity-redesigned {
        background: linear-gradient(135deg, #007bff 0%, #0056b3 100%);
        color: white;
        border: none;
        padding: 8px 16px;
        border-radius: 6px;
        font-size: 13px;
        font-weight: 600;
        cursor: pointer;
        transition: all 0.3s ease;
      }

      .btn-add-activity-redesigned:hover {
        transform: translateY(-1px);
        box-shadow: 0 2px 8px rgba(0, 123, 255, 0.3);
      }

      .btn-remove-phase-redesigned {
        background: linear-gradient(135deg, #dc3545 0%, #c82333 100%);
        color: white;
        border: none;
        padding: 8px 16px;
        border-radius: 6px;
        font-size: 13px;
        font-weight: 600;
        cursor: pointer;
        transition: all 0.3s ease;
      }

      .btn-remove-phase-redesigned:hover {
        transform: translateY(-1px);
        box-shadow: 0 2px 8px rgba(220, 53, 69, 0.3);
      }

      .time-phase-content-redesigned {
        padding: 20px;
      }

      .activity-item-redesigned {
        background: #f8f9fa;
        border: 2px solid #e9ecef;
        border-radius: 10px;
        padding: 16px;
        margin-bottom: 16px;
        position: relative;
        transition: all 0.3s ease;
      }

      .activity-item-redesigned:hover {
        border-color: #667eea;
        box-shadow: 0 2px 8px rgba(102, 126, 234, 0.1);
      }

      .activity-item-redesigned:last-child {
        margin-bottom: 0;
      }

      .remove-activity-btn-redesigned {
        position: absolute;
        top: 8px;
        right: 8px;
        background: #dc3545;
        color: white;
        border: none;
        width: 24px;
        height: 24px;
        border-radius: 50%;
        cursor: pointer;
        font-size: 14px;
        display: flex;
        align-items: center;
        justify-content: center;
        transition: all 0.3s ease;
      }

      .remove-activity-btn-redesigned:hover {
        background: #c82333;
        transform: scale(1.1);
      }

      .activity-input-redesigned {
        width: 100%;
        padding: 12px 16px;
        border: 2px solid #e9ecef;
        border-radius: 8px;
        font-size: 15px;
        font-weight: 600;
        margin-bottom: 12px;
        background: white;
        transition: border-color 0.3s ease;
      }

      .activity-input-redesigned:focus {
        outline: none;
        border-color: #667eea;
        box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
      }

      .activity-notes-redesigned {
        width: 100%;
        padding: 12px 16px;
        border: 2px solid #e9ecef;
        border-radius: 8px;
        font-size: 14px;
        resize: vertical;
        min-height: 80px;
        background: white;
        transition: border-color 0.3s ease;
        font-family: inherit;
      }

      .activity-notes-redesigned:focus {
        outline: none;
        border-color: #667eea;
        box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
      }

      .no-activities-redesigned {
        text-align: center;
        padding: 30px 20px;
        color: #6c757d;
        font-style: italic;
        background: #f8f9fa;
        border-radius: 8px;
        border: 2px dashed #dee2e6;
      }

      /* Day Plan Preview Modal Styles */
      .day-plan-preview {
        max-height: 70vh;
        overflow-y: auto;
      }

      .day-plan-summary {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        color: white;
        padding: 20px;
        border-radius: 12px;
        margin-bottom: 20px;
        text-align: center;
      }

      .day-plan-summary h3 {
        margin: 0 0 8px 0;
        font-size: 24px;
        font-weight: 700;
      }

      .day-plan-summary p {
        margin: 0;
        opacity: 0.9;
        font-size: 16px;
      }

      .preview-time-phases {
        display: flex;
        flex-direction: column;
        gap: 20px;
      }

      .preview-time-phase {
        background: white;
        border: 2px solid #e9ecef;
        border-radius: 12px;
        overflow: hidden;
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
      }

      .preview-phase-header {
        background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
        padding: 16px 20px;
        border-bottom: 1px solid #dee2e6;
      }

      .preview-phase-title {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin: 0;
      }

      .preview-phase-name {
        font-size: 18px;
        font-weight: 600;
        color: #495057;
      }

      .preview-phase-time {
        background: #667eea;
        color: white;
        padding: 4px 12px;
        border-radius: 16px;
        font-size: 12px;
        font-weight: 600;
      }

      .preview-phase-activities {
        padding: 20px;
      }

      .preview-activity {
        background: #f8f9fa;
        border: 1px solid #e9ecef;
        border-radius: 8px;
        padding: 16px;
        margin-bottom: 12px;
        transition: all 0.3s ease;
      }

      .preview-activity:hover {
        background: #e9ecef;
        border-color: #667eea;
      }

      .preview-activity:last-child {
        margin-bottom: 0;
      }

      .preview-activity-name {
        font-size: 16px;
        font-weight: 600;
        color: #495057;
        margin-bottom: 8px;
      }

      .preview-activity-notes {
        font-size: 14px;
        color: #6c757d;
        line-height: 1.5;
        margin: 0;
      }

      .preview-no-activities {
        text-align: center;
        padding: 30px 20px;
        color: #6c757d;
        font-style: italic;
        background: #f8f9fa;
        border-radius: 8px;
        border: 2px dashed #dee2e6;
      }

      .preview-empty-day {
        text-align: center;
        padding: 60px 20px;
        color: #6c757d;
      }

      .preview-empty-day h4 {
        margin-bottom: 12px;
        color: #495057;
      }

      .day-plan-stats {
        background: #f8f9fa;
        border-radius: 8px;
        padding: 16px;
        margin-bottom: 20px;
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
        gap: 16px;
        text-align: center;
      }

      .stat-item {
        display: flex;
        flex-direction: column;
        align-items: center;
      }

      .stat-number {
        font-size: 24px;
        font-weight: 700;
        color: #667eea;
        margin-bottom: 4px;
      }

      .stat-label {
        font-size: 12px;
        color: #6c757d;
        font-weight: 600;
        text-transform: uppercase;
        letter-spacing: 0.5px;
      }

      .btn-view-day-plan {
        background: linear-gradient(135deg, #17a2b8 0%, #138496 100%);
        color: white;
        border: none;
        padding: 8px 16px;
        border-radius: 6px;
        font-size: 13px;
        font-weight: 600;
        cursor: pointer;
        transition: all 0.3s ease;
        margin-left: 8px;
      }

      .btn-view-day-plan:hover {
        transform: translateY(-1px);
        box-shadow: 0 2px 8px rgba(23, 162, 184, 0.3);
      }

      .day-plan-header-actions {
        display: flex;
        align-items: center;
        gap: 8px;
      }

      /* --- Enhanced Schedule Detail Display Styles --- */
      .schedule-detail-content-enhanced {
        font-family: "Poppins", sans-serif; /* Assuming Poppins is loaded */
        color: #333;
        padding: 20px;
        background-color: #f9f9f9;
        border-radius: 8px;
      }

      .shared-schedule-notice {
        background-color: #eef7ff;
        border: 1px solid #b3d4fc;
        color: #0a58ca;
        padding: 10px 15px;
        border-radius: 6px;
        margin-bottom: 20px;
        display: flex;
        align-items: center;
        font-size: 0.9em;
      }

      .shared-schedule-notice .shared-icon {
        margin-right: 10px;
        font-size: 1.2em;
      }

      .detail-header-section {
        margin-bottom: 25px;
        padding-bottom: 15px;
        border-bottom: 1px solid #e0e0e0;
      }

      .detail-header-section h2 {
        font-size: 1.8em;
        font-weight: 600;
        color: #2c3e50;
        margin: 0 0 5px 0;
      }

      .schedule-description-detail {
        font-size: 1em;
        color: #555;
        line-height: 1.6;
      }

      .detail-section h3 {
        font-size: 1.4em;
        font-weight: 500;
        color: #34495e;
        margin-bottom: 15px;
        padding-bottom: 8px;
        border-bottom: 2px solid #3498db; /* Accent color for section headers */
        display: inline-block; /* So border bottom only spans text */
      }

      .detail-grid-enhanced {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
        gap: 20px;
        margin-bottom: 20px;
      }

      .detail-item-enhanced {
        background-color: #fff;
        padding: 15px;
        border-radius: 6px;
        border: 1px solid #e0e0e0;
        box-shadow: 0 1px 3px rgba(0, 0, 0, 0.05);
      }

      .detail-item-enhanced.full-width {
        grid-column: 1 / -1; /* Span full width if needed */
      }

      .detail-item-enhanced label {
        display: block;
        font-weight: 600;
        color: #555;
        margin-bottom: 6px;
        font-size: 0.9em;
      }

      .detail-item-enhanced span,
      .detail-item-enhanced .shared-emails-list,
      .detail-item-enhanced .tags-list {
        font-size: 1em;
        color: #333;
      }

      .visibility-badge {
        padding: 3px 8px;
        border-radius: 4px;
        font-size: 0.85em;
        font-weight: 500;
        color: #fff;
      }
      .visibility-badge.public {
        background-color: #27ae60;
      }
      .visibility-badge.shared {
        background-color: #3498db;
      }
      .visibility-badge.private {
        background-color: #e67e22;
      }

      .shared-emails-list .email-badge {
        background-color: #e9ecef;
        color: #495057;
        padding: 3px 8px;
        border-radius: 10px;
        font-size: 0.85em;
        margin-right: 5px;
        margin-bottom: 5px;
        display: inline-block;
      }

      .tags-list .tag-badge {
        background-color: #3498db;
        color: white;
        padding: 3px 8px;
        border-radius: 10px;
        font-size: 0.85em;
        margin-right: 5px;
        margin-bottom: 5px;
        display: inline-block;
      }

      .detail-days-container-enhanced {
        margin-top: 20px;
      }

      .detail-day-card {
        background-color: #ffffff;
        border: 1px solid #d1d9e6;
        border-radius: 8px;
        margin-bottom: 25px;
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
        overflow: hidden; /* To contain children with border-radius */
      }

      .day-card-header {
        background-color: #3498db; /* Primary theme color */
        color: white;
        padding: 15px 20px;
        display: flex;
        justify-content: space-between;
        align-items: center;
        border-bottom: 1px solid #2980b9;
      }

      .day-card-header h4 {
        margin: 0;
        font-size: 1.25em;
        font-weight: 600;
      }

      .day-card-date {
        font-size: 0.95em;
        font-weight: 500;
      }

      .day-card-body {
        padding: 20px;
      }

      .day-card-meta {
        margin-bottom: 15px;
        padding: 10px;
        background-color: #f8f9fa;
        border-radius: 4px;
        border-left: 3px solid #7f8c8d; /* Subtler accent for meta info */
      }

      .day-card-meta label {
        font-weight: 600;
        color: #34495e;
        margin-bottom: 5px;
        display: block;
      }

      .day-card-meta p {
        margin: 0;
        font-size: 0.95em;
        color: #555;
        line-height: 1.5;
      }

      .day-card-meta.no-activities-day p {
        font-style: italic;
        color: #7f8c8d;
      }

      .day-activities-detailed {
        margin-top: 15px;
      }

      .time-phase-block {
        margin-bottom: 20px;
        background-color: #fdfdfd;
        border: 1px solid #e0e0e0;
        border-radius: 6px;
        padding: 15px;
      }

      .time-phase-block:last-child {
        margin-bottom: 0;
      }

      .phase-block-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 10px;
        padding-bottom: 10px;
        border-bottom: 1px dashed #ccc;
      }

      .phase-block-header h5 {
        margin: 0;
        font-size: 1.15em;
        font-weight: 600;
        color: #2c3e50;
      }

      .phase-block-time {
        font-size: 0.9em;
        font-weight: 500;
        color: #e67e22; /* Orange to stand out */
        background-color: #fef5e7;
        padding: 3px 8px;
        border-radius: 4px;
      }

      .activity-list-detailed {
        list-style: none;
        padding-left: 0;
      }

      .activity-item-detailed {
        padding: 10px;
        border-bottom: 1px solid #f0f0f0;
        margin-bottom: 8px;
        background-color: #fff;
        border-radius: 4px;
        position: relative;
      }

      .activity-item-detailed:last-child {
        border-bottom: none;
        margin-bottom: 0;
      }

      .activity-name-detailed {
        font-weight: 600;
        color: #333;
        font-size: 1.05em;
        margin-bottom: 4px;
      }

      .activity-notes-detailed small,
      .activity-duration-detailed small {
        font-size: 0.9em;
        color: #666;
        display: block;
        line-height: 1.4;
      }

      .activity-duration-detailed {
        margin-top: 5px;
      }

      .no-days-detail,
      .no-activities-for-day,
      .no-phases-for-day,
      .no-activities-in-phases {
        font-style: italic;
        color: #777;
        padding: 15px;
        text-align: center;
        background-color: #f9f9f9;
        border-radius: 4px;
        margin-top: 10px;
      }
    </style>
  </body>
</html>
